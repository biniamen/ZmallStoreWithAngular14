<div class="table-container">


    <div class="row">
        <div class="table-buttons">
            <button mat-raised-button (click)="printData()">Print</button>
            <button mat-raised-button (click)="exportCSV()">Export to CSV</button>
        </div>
        <div class="col-xl-8 ">
            <div class="table-with-label">
                <h2 class="corner-label">History</h2>
                <div class="search-container">
                    <mat-form-field appearance="standard">
                      <mat-label>Search</mat-label>
                      <input matInput (keyup)="applyFilter($event)" placeholder="Type to search...">
                    </mat-form-field>
                  </div>
                <div class="mat-elevation-z8">
                    <table mat-table [dataSource]="dataSource" matSort class="full-width-table">

                        <!-- ID Column -->
                        <ng-container matColumnDef="id">
                            <th mat-header-cell *matHeaderCellDef> No. </th>
                            <td mat-cell *matCellDef="let element"> {{element.unique_id}} </td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="user">
                            <th mat-header-cell *matHeaderCellDef> User </th>
                            <td mat-cell *matCellDef="let element"> {{element.user_detail.first_name}} </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="deliveryman">
                            <th mat-header-cell *matHeaderCellDef> Deliveryman </th>
                            <td mat-cell *matCellDef="let element"> {{element.accepted_by.username}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef> Date </th>
                            <td mat-cell *matCellDef="let element"> {{element.completed_at | date:'short'}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="total">
                            <th mat-header-cell *matHeaderCellDef> Total </th>
                            <td mat-cell *matCellDef="let element"> {{element.order_payment_detail.total}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef> Status </th>
                            <td mat-cell *matCellDef="let element">
                                <span [ngClass]="{
                                    'badge': true,
                                    'bg-danger': element.order_status === 104 || element.order_status === 103,
                                    'bg-success': element.order_status === 25
                                }">
                                    {{element.order_status === 104 || element.order_status === 103 ? 'Cancelled' : element.order_status === 25 ? 'Completed' : 'Other Status'}}
                                </span>
                            </td>
                        </ng-container>
                        <!-- Action Column -->
                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef> Action </th>
                            <td mat-cell *matCellDef="let element">
                                <span class="badge bg-dark .rounded-5" data-bs-toggle="modal" data-bs-target="#modalXl">View Detail</span>
                            </td>
                        </ng-container>

                        <!-- Rows -->
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)" [class.selected]="selectedRow === row"></tr>
                    </table>

                    <!-- Paginator -->
                    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
                </div>
            </div>
        </div>

        <div class="col-xl-4">
            <div class="card mb-xl-0 mb-3">
                <div class="card-header fw-bold">
                    {{currency_sign}} {{selectedRow.order_payment_detail.total }}
                </div>
                <div class="card-body">
                    <h5 class="card-title" *ngIf="selectedRow">{{ selectedRow.order_payment_detail.total }}</h5>
                    <h6 class="card-subtitle mb-3 text-body text-opacity-50">
                        Card subtitle</h6>
                        <hr class="opacity-1">
                    <p class="card-text mb-3">Some quick example text to build
                        on the card title and make up the bulk of the card's
                        content.</p>
                    <a href="#" class="card-link">Card link</a>
                    <a href="#" class="card-link">Another link</a>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- detail modal -->
<div class="modal fade" id="modalXl">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title fs-5">Extra large modal</div>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                ...
            </div>
        </div>
    </div>
</div>